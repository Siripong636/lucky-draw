<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Lucky Draw - Thai Airways</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<style>
  html {
  -webkit-text-size-adjust: 100%;
}

body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#370E62;
  color:#F5C300;
  text-align:center;
}
.logo{
  margin-top:20px;
}
.logo img{
  max-width:180px;
}
.number{
  font-size: 10vw;     
  letter-spacing: 2vw;
  margin: 30px 0;
  line-height: 1.2;
}
button{
  font-size:28px;
  padding:20px 50px;
  border:none;
  border-radius:12px;
  background:#B6007D;
  color:white;
}
button:active{
  transform:scale(0.97);
}
    .digit {
  display: inline-block;
  width: 1em;
  text-align: center;
  transition: transform 0.2s ease;
}
</style>
</head>
<body>

<div class="logo">
  <img src="logo.png">
</div>

<h1>จับรางวัล Lucky Draw</h1>

<div id="num" class="number">
  <span class="digit">0</span>
  <span class="digit">0</span>
  <span class="digit">0</span>
  <span class="digit">0</span>
  <span class="digit">0</span>
</div>

<button onclick="start()">เริ่มสุ่ม</button>

<script>
const numbers = [
20580,29171,31466,33474,39394,49636
];

let used = [];

function start(){
  if(used.length === numbers.length){
    alert("เลขถูกใช้ครบแล้ว");
    return;
  }

  let pool = numbers.filter(n => !used.includes(n));
  let final = pool[Math.floor(Math.random()*pool.length)].toString();
  used.push(parseInt(final));

    const digits = document.querySelectorAll(".digit");
  let intervals = [];

  // เริ่มหมุนทุกหลัก
  digits.forEach((d, i) => {
    intervals[i] = setInterval(() => {
      d.textContent = Math.floor(Math.random() * 10);
      d.style.transform = "translateY(-10px)";
      setTimeout(() => d.style.transform = "translateY(0)", 100);
    }, 80);
  });

  // หยุดทีละหลัก
  digits.forEach((d, i) => {
    setTimeout(() => {
      clearInterval(intervals[i]);
      d.textContent = final[i];
      if(i === digits.length - 1){
        shootConfetti();
      }
    }, 1200 + i * 700);
  });
}

function shootConfetti() {
  const duration = 3 * 1000;
  const end = Date.now() + duration;

  (function frame() {
    confetti({
      particleCount: 7,
      angle: 60,
      spread: 55,
      origin: { x: 0 }
    });
    confetti({
      particleCount: 7,
      angle: 120,
      spread: 55,
      origin: { x: 1 }
    });

    if (Date.now() < end) {
      requestAnimationFrame(frame);
    }
  })();
}

</script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>


</body>
</html>
